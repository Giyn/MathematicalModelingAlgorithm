## 灰色关联分析简介

　　**灰色关联分析**是指对一个系统发展变化态势的定量描述和比较的方法，其基本思想是通过确定参考数据列和若干个比较数据列的几何形状相似程度来判断其联系是否紧密，它反映了**曲线间的关联程度**。

> **黑色系统和白色系统**：按照控制论的惯例，颜色一般代表的是对于一个系统我们已知的信息的多少，白色就代表信息充足，比如一个力学系统，元素之间的关系都是能够确定的，这就是一个白色系统；而黑色系统代表我们对于其中的结构并不清楚的系统，通常叫做黑箱或黑盒的就是这类系统。灰色介于两者之间，表示我们只对该系统有部分了解。

　　在系统发展过程中，若两个因素变化的趋势具有一致性，即同步变化程度较高，即可谓二者关联程度较高；反之，则较低。因此，灰色关联分析方法，是根据**因素之间发展趋势的相似或相异程度**，亦即“灰色关联度”，作为衡量**因素间关联程度**的一种方法。

​		简单来说，假设已知某个指标可能与其他某几个因素相关，且想知道该指标与其他哪个因素相对来说更相关、与哪个因素相对关系弱一点，以此类推，将这些因素进行排序，根据结果即可知晓。

　　灰色系统理论提出了对各子系统进行灰色关联度分析的概念，意图透过一定的方法，去寻求系统中各子系统（或因素）之间的数值关系。因此，灰色关联度分析对于一个系统发展变化态势提供了量化的度量，非常适合动态历程分析。

## 灰色关联分析的使用

　　GRA 的核心是按照一定规则确立随时间变化的母序列，把各个评估对象随时间的变化作为子序列，求各个子序列与母序列的相关程度，依照相关性大小得出结论。GRA 是一种根据各因素变化曲线几何形状的相似程度，来判断因素之间关联程度的方法。

　　此方法通过对动态过程发展态势的量化分析，完成对系统内时间序列有关统计数据几何关系的比较，求出参考数列与各比较数列之间的灰色关联度。与参考数列关联度越大的比较数列，其发展方向和速率与参考数列越接近，与参考数列的关系越紧密。

　　GRA 要求样本容量可以少到 4 个，对数据无规律同样适用，不会出现量化结果与定性分析结果不符的情况。其基本思想是将评价指标原始观测数进行**无量纲化处理**，计算关联系数、关联度以及根据关联度的大小对待评指标进行排序。

　　关联度有绝对关联度和相对关联度之分，绝对关联度采用初始点零化法进行初值化处理，当分析的因素差异较大时，由于变量间的量纲不一致，往往影响分析，难以得出合理的结果。而相对关联度用相对量进行分析，计算结果仅与序列相对于初始点的变化速率有关，与各观测数据大小无关，这在一定程度上弥补了绝对关联度的缺陷。

## 灰色关联分析的计算步骤

#### 确定分析数列

确定反映系统行为特征的参考数列和影响系统行为的比较数列。反映系统行为特征的数据序列，称为参考数列。影响系统行为的因素组成的数据序列，称比较数列。

设参考数列（又称母序列）为 $Y=\{Y(k)  \quad |\quad k = 1,2,Λ,n\}$；比较数列（又称子序列）为 $X_i=\{X_i(k) \quad|\quad k = 1,2,Λ,n\},i = 1,2,Λ,m$。

#### 变量的无量纲化

初值化法：
$$
x_{i}(k)=\frac{X_{i}(k)}{X_{i}(1)}, k=1,2, \Lambda, n ; i=0,1,2, \Lambda, m
$$

#### 计算关联系数

$x_0(k)$ 与 $x_i(k)$ 的关联系数
$$
\begin{array}{l}
\zeta_{i}(k)=\frac{\mathop{min}\limits_{i} \mathop{min}\limits_{k}\left|y(k)-x_{i}(k)\right|+\rho \mathop{max}\limits_{i}\mathop{max}\limits_{k}\left|y(k)-x_{i}(k)\right|}{\left|y(k)-x_{i}(k)\right|+\rho \mathop{max}\limits_{i}\mathop{max}\limits_{k} \left|y(k)-x_{i}(k)\right|}
\end{array}
$$
记 $\triangle_{i}(k)=\left|y(k)-x_{i}(k)\right|$，则
$$
\begin{array}{l}
\zeta_{i}(k)=\frac{\mathop{min}\limits_{i} \mathop{min}\limits_{k} \Delta_{i}(k)+\rho \mathop{max}\limits_{i}\mathop{max}\limits_{k}\Delta_{i}(k)}{\Delta_{i}(k)+\rho \mathop{max}\limits_{i}\mathop{max}\limits_{k}\Delta_{i}(k)}
\end{array}
$$
$\rho \in (0, \infin)$，称为分辨系数。$ρ$ 越小，分辨力越大，一般 $ρ$ 的取值区间为 $(0,1)$，具体取值可视情况而定。当 $\rho \leq 0.5463$ 时，分辨力最好，通常取 $ρ = 0.5$。

#### 计算关联度

因为关联系数是比较数列与参考数列在各个时刻（即曲线中的各点）的关联程度值，所以它的数不止一个，而信息过于分散不便于进行整体性比较。因此有必要将各个时刻（即曲线中的各点）的关联系数集中为一个值，即求其平均值，作为比较数列与参考数列间关联程度的数量表示，关联度 $r_i$ 公式如下：
$$
r_{i}=\frac{1}{n} \sum_{k=1}^{n} \xi_{i}(k), k=1,2, \Lambda, n
$$

#### 关联度排序

关联度按大小排序，如果 $r_1 < r_2$，则参考数列 $y$ 与比较数列 $x_2$ 更相似。

在算出 $X_i(k)$ 序列与 $Y(k)$ 序列的关联系数后，计算各类关联系数的平均值，平均值 $r_i$ 就称为 $Y(k)$ 与 $X_i(k)$ 的关联度。